<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Angular 介紹 | Raquel Blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="coding blog">
    
    <link rel="preload" href="/blog/assets/css/0.styles.5452f2d8.css" as="style"><link rel="preload" href="/blog/assets/js/app.4f9b2bd2.js" as="script"><link rel="preload" href="/blog/assets/js/2.25b070e4.js" as="script"><link rel="preload" href="/blog/assets/js/17.eb9c6b51.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.94ddf3fd.js"><link rel="prefetch" href="/blog/assets/js/11.99dcab8d.js"><link rel="prefetch" href="/blog/assets/js/12.3912e45f.js"><link rel="prefetch" href="/blog/assets/js/13.bc89b9a4.js"><link rel="prefetch" href="/blog/assets/js/14.1e036d9c.js"><link rel="prefetch" href="/blog/assets/js/15.04478a73.js"><link rel="prefetch" href="/blog/assets/js/16.912a6668.js"><link rel="prefetch" href="/blog/assets/js/18.a6df5534.js"><link rel="prefetch" href="/blog/assets/js/19.806b4356.js"><link rel="prefetch" href="/blog/assets/js/20.416b717e.js"><link rel="prefetch" href="/blog/assets/js/21.088cb137.js"><link rel="prefetch" href="/blog/assets/js/22.754ea95f.js"><link rel="prefetch" href="/blog/assets/js/23.38977bfe.js"><link rel="prefetch" href="/blog/assets/js/24.ad281baa.js"><link rel="prefetch" href="/blog/assets/js/25.0bfc28ba.js"><link rel="prefetch" href="/blog/assets/js/26.2f6babd5.js"><link rel="prefetch" href="/blog/assets/js/27.0f328a7d.js"><link rel="prefetch" href="/blog/assets/js/28.40a40f13.js"><link rel="prefetch" href="/blog/assets/js/29.804a41f8.js"><link rel="prefetch" href="/blog/assets/js/3.878a54ee.js"><link rel="prefetch" href="/blog/assets/js/30.b19cca4e.js"><link rel="prefetch" href="/blog/assets/js/31.6c2282de.js"><link rel="prefetch" href="/blog/assets/js/32.1f89f9da.js"><link rel="prefetch" href="/blog/assets/js/33.e80db2f0.js"><link rel="prefetch" href="/blog/assets/js/34.8570fcc7.js"><link rel="prefetch" href="/blog/assets/js/35.5aa9280d.js"><link rel="prefetch" href="/blog/assets/js/36.ee00ba9b.js"><link rel="prefetch" href="/blog/assets/js/37.d9c952d8.js"><link rel="prefetch" href="/blog/assets/js/38.85c4005d.js"><link rel="prefetch" href="/blog/assets/js/39.cb6e3008.js"><link rel="prefetch" href="/blog/assets/js/4.84027984.js"><link rel="prefetch" href="/blog/assets/js/40.4d69e88a.js"><link rel="prefetch" href="/blog/assets/js/41.31040770.js"><link rel="prefetch" href="/blog/assets/js/42.158ae5eb.js"><link rel="prefetch" href="/blog/assets/js/43.04bfba89.js"><link rel="prefetch" href="/blog/assets/js/44.50d91ba1.js"><link rel="prefetch" href="/blog/assets/js/45.91cd3a7f.js"><link rel="prefetch" href="/blog/assets/js/46.2e35d298.js"><link rel="prefetch" href="/blog/assets/js/47.4af7d5f9.js"><link rel="prefetch" href="/blog/assets/js/5.32b4eb84.js"><link rel="prefetch" href="/blog/assets/js/6.d6645e3f.js"><link rel="prefetch" href="/blog/assets/js/7.30792059.js"><link rel="prefetch" href="/blog/assets/js/8.c816ae57.js"><link rel="prefetch" href="/blog/assets/js/9.aa3502c0.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.5452f2d8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">Raquel Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link">
  首頁
</a></div><div class="nav-item"><a href="https://github.com/RaquelYang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link">
  首頁
</a></div><div class="nav-item"><a href="https://github.com/RaquelYang" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/blog/" aria-current="page" class="sidebar-link">首頁</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/angular_pollex/" class="sidebar-heading clickable"><span>Angular Pollex</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/angular_project/" class="sidebar-heading clickable"><span>Angular Project</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/angular/" aria-current="page" class="sidebar-heading clickable router-link-exact-active router-link-active open active"><span>Angular 筆記</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/angular/" aria-current="page" class="active sidebar-link">Angular 介紹</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/angular/#angular-基本語法" class="sidebar-link">Angular 基本語法</a></li><li class="sidebar-sub-header"><a href="/blog/angular/#安全導覽運算子-safe-navigation-operator" class="sidebar-link">安全導覽運算子 safe navigation operator(?.)</a></li><li class="sidebar-sub-header"><a href="/blog/angular/#template-型別錯誤" class="sidebar-link">Template 型別錯誤</a></li><li class="sidebar-sub-header"><a href="/blog/angular/#angular-元件架構" class="sidebar-link">Angular 元件架構</a></li><li class="sidebar-sub-header"><a href="/blog/angular/#模組化架構" class="sidebar-link">模組化架構</a></li><li class="sidebar-sub-header"><a href="/blog/angular/#生命週期" class="sidebar-link">生命週期</a></li><li class="sidebar-sub-header"><a href="/blog/angular/#output" class="sidebar-link">@Output</a></li></ul></li><li><a href="/blog/angular/pipe.html" class="sidebar-link">Pipe 管線元件</a></li><li><a href="/blog/angular/rxjs.html" class="sidebar-link">RxJS</a></li><li><a href="/blog/angular/directives.html" class="sidebar-link">三種 Angular 指令 (Directives)</a></li><li><a href="/blog/angular/databinding.html" class="sidebar-link">資料繫結的四種方法</a></li><li><a href="/blog/angular/form.html" class="sidebar-link">Form 表單</a></li><li><a href="/blog/angular/form2.html" class="sidebar-link">Angular 2 表單處理與驗證</a></li><li><a href="/blog/angular/nameCalled.html" class="sidebar-link">Angular 命名規則與程式碼攥寫風格</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/problems/" class="sidebar-heading clickable"><span>疑難雜症</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/vuepress_note/" class="sidebar-heading clickable"><span>Vuepress 筆記</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/vue2/" class="sidebar-heading clickable"><span>Vue2 筆記</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/vue3/" class="sidebar-heading clickable"><span>Vue3 筆記</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/pwa/" class="sidebar-heading clickable"><span>PWA 筆記</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/ajax/" class="sidebar-heading clickable"><span>AJAX 筆記</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/firebase/" class="sidebar-heading clickable"><span>Firebase 筆記</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/typescript/" class="sidebar-heading clickable"><span>Typescript 筆記</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/blog/material/" class="sidebar-heading clickable"><span>Material 筆記</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="angular-介紹"><a href="#angular-介紹" class="header-anchor">#</a> Angular 介紹</h1> <h3 id="安裝-angular"><a href="#安裝-angular" class="header-anchor">#</a> 安裝 Angular</h3> <p>安裝 @angular/cli</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> i -g @angular/cli
</code></pre></div><p>查看 angular 版本</p> <div class="language-sh extra-class"><pre class="language-sh"><code>ng version
<span class="token comment"># Angular CLI: 13.3.2</span>
</code></pre></div><p>安裝 vs code angular 套件
套件：Angular Extension Pack</p> <h3 id="建立-angularcli"><a href="#建立-angularcli" class="header-anchor">#</a> 建立 AngularCli</h3> <p>建立一個 AngularCli 專案</p> <div class="language-sh extra-class"><pre class="language-sh"><code>ng new demo
</code></pre></div><p>會詢問你幾個問題</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 是不是要加入 routing</span>
? Would you like to <span class="token function">add</span> Angular routing? Yes
<span class="token comment"># css 預處理器選擇</span>
? Which stylesheet <span class="token function">format</span> would you like to use? SCSS <span class="token punctuation">[</span>https://sass-lang.com/documentation/syntax<span class="token comment">#scss]</span>
</code></pre></div><p>再用 vscode 打開專案資料夾 (demo) 輸入開啟專案</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> start
</code></pre></div><h3 id="angular-目錄結構用途"><a href="#angular-目錄結構用途" class="header-anchor">#</a> Angular 目錄結構用途</h3> <p>src &gt; app &gt; 主要寫程式的地方
assets &gt; 靜態檔案(css, js, icon, images)</p> <h2 id="angular-基本語法"><a href="#angular-基本語法" class="header-anchor">#</a> Angular 基本語法</h2> <p>app.module.ts</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// angular module</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">NgModule</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// view component</span>
  declarations<span class="token operator">:</span> <span class="token punctuation">[</span>AppComponent<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// import Module</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>BrowserModule<span class="token punctuation">,</span> AppRoutingModule<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// import service</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// 啟動根元件</span>
  bootstrap<span class="token operator">:</span> <span class="token punctuation">[</span>AppComponent<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// dircrator</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppModule</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>app.component.ts</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// 元件 dircrator</span>
<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// tag 名字 &lt;app-root&gt;&lt;/app-root&gt;</span>
  selector<span class="token operator">:</span> <span class="token string">'app-root'</span><span class="token punctuation">,</span>
  templateUrl<span class="token operator">:</span> <span class="token string">'./app.component.html'</span><span class="token punctuation">,</span>
  styleUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'./app.component.scss'</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="加入一個-component-到-app"><a href="#加入一個-component-到-app" class="header-anchor">#</a> 加入一個 component 到 app</h4> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token comment"># 加入 component 到 app 下面</span>
ng generate component page1
<span class="token comment"># 簡寫</span>
ng g c page1
</code></pre></div><p>會一個 component 資料夾裡面會有四個檔案</p> <ul><li>page1.component.css</li> <li>page1.component.html</li> <li>page1.component.spce.ts</li> <li>page1.component.ts</li></ul> <p>另外會註冊 page1 檔案到 app.modules.ts</p> <p>若要使用在 app 使用 page1 元件
在 app.component.html 加入以下 tag 即可使用 page1 元件</p> <div class="language-html extra-class"><pre class="language-html"><code>...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-page1</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app-page1</span><span class="token punctuation">&gt;</span></span>
...
</code></pre></div><p>查詢建立不同類型的 component</p> <div class="language-sh extra-class"><pre class="language-sh"><code>ng generate -h
<span class="token comment"># 可以使用以下的 component</span>
<span class="token comment"># app-shell</span>
<span class="token comment"># application</span>
<span class="token comment"># class</span>
<span class="token comment"># component</span>
<span class="token comment"># directive</span>
<span class="token comment"># enum</span>
<span class="token comment"># guard</span>
<span class="token comment"># interceptor</span>
<span class="token comment"># interface</span>
<span class="token comment"># library</span>
<span class="token comment"># module</span>
<span class="token comment"># pipe</span>
<span class="token comment"># resolver</span>
<span class="token comment"># service</span>
<span class="token comment"># service-worker</span>
<span class="token comment"># web-worker</span>
</code></pre></div><h4 id="加入靜態資料到-angular"><a href="#加入靜態資料到-angular" class="header-anchor">#</a> 加入靜態資料到 Angular</h4> <p>加入 api folder, assets folder, blog-index.html 靜態檔案複製到 src 資料夾內，並且重新啟動網站</p> <p><a href="https://github.com/doggy8088/angular-zero/" target="_blank" rel="noopener noreferrer">source code<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>如果直接在網址上面打 http://localhost:4200/blog-index.html 並不會看到頁面，需在 angular.json 檔案設定 assets 資料才可以使用，在 projects &gt; demo &gt; architect &gt; build &gt; options &gt; assets 內新增</p> <p>angular.json</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;assets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;src/blog-index.html&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;src/api&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;src/favicon.ico&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;src/assets&quot;</span>
<span class="token punctuation">]</span>
</code></pre></div><p>新增完後再重啟網站(npm start)，在網址列輸入 http://localhost:4200/blog-index.html, http://localhost:4200/api/db.json 看網頁是否可以正常顯示，若可以顯示代表設定沒問題，如果無法顯示需確認是不是哪裡有打錯。</p> <p>接下來將靜態網頁 blog-index.html 合併到 Angular 專案下，head 的內容不會包含在 component 裡面，所以 head 裏面的設定需放入 index.html 檔案內</p> <p>將 index.html 內的 head 留下 base tag 其餘的資料刪除，且貼上位置需在 base 之後。base 為整份網頁所有的超連結預設的基礎。如果貼在 base 之前有可能找不到 js, css 的檔案導致網站壞掉</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>base</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- head 程式碼貼在這邊 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span>
  <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewport<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/assets/styles/mainapp.css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>stylesheet<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><p>接下來複製 blog-index.html body 到 app.component.html 裡面貼上 (tip: 使用 mac 電腦在 vscode 可以使用快速鍵 commamd + p 打開搜尋資料面板，輸入 appcom 搜尋檔案) 貼完後回到首頁看一下有沒有問題</p> <p>ok 有報錯打開 fn + F12 看一下 console 錯誤碼，將 hgroup tag 改成 div 即可，因為 Angular 只能接受 html5 的 tag。</p> <h4 id="部署-angular"><a href="#部署-angular" class="header-anchor">#</a> 部署 Angular</h4> <p>在終端機輸入</p> <div class="language-sh extra-class"><pre class="language-sh"><code>ng build
</code></pre></div><p>在資料夾裡面會新增一個 dist 資料夾，打開 index.html 此時檔案是以壓縮過的檔案，按下 option + shift + F 讓檔案重新排版</p> <p>在 dist 資料夾發現 blog-index.html 但這個並非開發用，只是為了貼上版型，這樣需回到 angular.json 把
blog-index.html 刪除</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;assets&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">&quot;src/api&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;src/favicon.ico&quot;</span><span class="token punctuation">,</span>
  <span class="token string">&quot;src/assets&quot;</span>
<span class="token punctuation">]</span>
</code></pre></div><h4 id="angular-版本升級"><a href="#angular-版本升級" class="header-anchor">#</a> Angular 版本升級</h4> <p>使用終端機輸入以下指令，查看 angular 版本，如果版本叫就終端機會顯示警告黃字</p> <div class="language-sh extra-class"><pre class="language-sh"><code>ng version
</code></pre></div><p>使用終端機輸入以下指令，則可以自動更新 angular 版本，主要是更新 angular.json 再重新下載新版本的檔案</p> <div class="language-sh extra-class"><pre class="language-sh"><code>ng update
</code></pre></div><p>更新 angular cli
使用 npm 查看 global 第一層安裝的檔案</p> <div class="language-sh extra-class"><pre class="language-sh"><code><span class="token function">npm</span> list -g --depth<span class="token operator">=</span><span class="token number">0</span>
<span class="token comment"># @angular/cli@13.3.2</span>

<span class="token comment"># 查看目前所安裝在本機 global 套件版本與最新版本</span>
<span class="token function">npm</span> outdated -g

<span class="token comment"># 更新 global 套件</span>
<span class="token function">npm</span> <span class="token function">install</span> -g @vue/cli @angular/cli
</code></pre></div><h4 id="範本參考變數-template-reference-variables"><a href="#範本參考變數-template-reference-variables" class="header-anchor">#</a> 範本參考變數 (Template reference variables)</h4> <blockquote><p>DOM</p></blockquote> <ul><li>範本參考變數可以用在任意的 HTML tag 上面，語法為 #name = ref-name</li> <li>會在範本內建立一個名為 name 的區域變數</li> <li>name 的區域變數會儲存該標籤的 DOM 物件</li> <li>可以透過 「事件繫結」 將 DOM 物件中屬性回傳元件的類別中
<blockquote><p>因為 DOM 物件會回傳到元件類別中，所以取名時需注意不可以一樣，以免抓錯值</p></blockquote></li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- #tKeyword 以免元件屬性相同，可以加入前綴字 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span>
  <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">#tKeyword</span>
  <span class="token attr-name">[(ngModel)]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>keyword<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">(keyup.escape)</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>keywordReset()<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>請輸入搜尋關鍵字<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">accesskey</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>s<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 可以把 keyword.length 改成 tKeyword.value.length --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>字串長度：{{ keyword.length }} 個字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>字串長度：{{ tKeyword.value.length }} 個字<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><blockquote><p>directive (component)</p></blockquote> <ul><li>如果寫在 directive 上的話，就可以使用該元件的屬性與方法</li></ul> <p>首先先建立一個 header 的 component</p> <div class="language-sh extra-class"><pre class="language-sh"><code>  ng g c header
</code></pre></div><p>然後把 app.component.html 裡面的 header 搬到 header.component.html 裡面</p> <p>header.component.html</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>header<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>...<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>app.component.html</p> <div class="language-html extra-class"><pre class="language-html"><code>...
<span class="token comment">&lt;!-- #tKeyword 以免元件屬性相同，可以加入前綴字 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-header</span> <span class="token attr-name">#tHeader</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app-header</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span> <span class="token attr-name">(click)</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tHeader.title = <span class="token punctuation">'</span>Title Change<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>這樣寫以後在 section click 的時候就會改變 header.component.html 裡的 title 屬性</p> <p>範本參考數變數只能在範本使用，在預設情況下無法在元件讀取</p> <h2 id="安全導覽運算子-safe-navigation-operator"><a href="#安全導覽運算子-safe-navigation-operator" class="header-anchor">#</a> 安全導覽運算子 safe navigation operator(?.)</h2> <p>從 Sever (後端)拿資料時有可能該欄位沒有值 (Linebot) 導致版面顯示有問題，若使用安全導覽運算子(?.) 代表該資料可有可無，不會讓頁面版面壞掉</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">[href]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.href<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item?.title | lowercase | slice:0:20 }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>Angular 安全導覽運算子只能使用在 html 的 template 裡</p> <h2 id="template-型別錯誤"><a href="#template-型別錯誤" class="header-anchor">#</a> Template 型別錯誤</h2> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 可能會報錯 Angular service language  --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">[href]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.href<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item.subject?.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 改寫成下面這樣 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">[href]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item.href<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{ item['subject']?.title }}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="angular-元件架構"><a href="#angular-元件架構" class="header-anchor">#</a> Angular 元件架構</h2> <p>Angular 是由各種 Component 組成</p> <p>父子元件可以使用使用屬性繫結、事件繫結來傳遞資料</p> <p>Service 透過相依注入(DI) 注入到特定 Component 裡面</p> <p>當專案越大時就會把相關的元件(Component, Service)分割成 Module(功能模組,Feature Module)</p> <h2 id="模組化架構"><a href="#模組化架構" class="header-anchor">#</a> 模組化架構</h2> <p>建立一個 Module ，在終端機輸入，Angular CLI 會自動幫我們建立 article.module.ts</p> <div class="language-sh extra-class"><pre class="language-sh"><code>ng g m article
</code></pre></div><p>建立完 Module 後須引入到 app.module.ts 裡面</p> <p>app.module.ts</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> NgModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@angular/core&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> BrowserModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@angular/platform-browser&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> AppRoutingModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./app-routing.module&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> AppComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./app.component&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> FormsModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@angular/forms&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// import ArticleModule</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ArticleModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./article/article.module&quot;</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">NgModule</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  declarations<span class="token operator">:</span> <span class="token punctuation">[</span>AppComponent<span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token comment">// import ArticleModule</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>BrowserModule<span class="token punctuation">,</span> AppRoutingModule<span class="token punctuation">,</span> FormsModule<span class="token punctuation">,</span> ArticleModule<span class="token punctuation">]</span><span class="token punctuation">,</span>
  providers<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  bootstrap<span class="token operator">:</span> <span class="token punctuation">[</span>AppComponent<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AppModule</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>另外一種建立方式</p> <p>建立 module 並自動引入到 app module 裡(感覺方便好用＝Ｄ)</p> <div class="language-sh extra-class"><pre class="language-sh"><code>ng g m article -m app
</code></pre></div><p>將 Article 拆解成元件 ArticleList &gt; ArticleHeader, ArticleBody 並引入到 ArticleModule 裡面</p> <p>首先</p> <p>要在 Article 資料夾建立 ArticleList 元件，直接在 vscode folder 按下右鍵選擇“在整合式終端機開啟”</p> <p>此時開啟終端機的位置就會在 Article 資料夾下，打以下指令即可建立 article-list 元件</p> <div class="language-sh extra-class"><pre class="language-sh"><code>ng g c article-list
</code></pre></div><p>建立完之後需在 ArticleModule exports ArticleListComponent (這樣在 app template 才能使用)</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token decorator"><span class="token at operator">@</span><span class="token function">NgModule</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  declarations<span class="token operator">:</span> <span class="token punctuation">[</span>
    ArticleListComponent
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  imports<span class="token operator">:</span> <span class="token punctuation">[</span>
    CommonModule
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  exports<span class="token operator">:</span><span class="token punctuation">[</span>
    ArticleListComponent
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>接下來把 app.component.html 的 article 搬入 article-list 裡，並在 app.component.html 加入 app-article-list tag</p> <p>app.component.ts data 搬入 article-list.component.ts 裡</p> <p>在 article-list 下建立 article-header, article-body (一樣需注意終端機的位置，在 article 資料夾下)</p> <div class="language-sh extra-class"><pre class="language-sh"><code>ng g c article-header
ng g c article-body
</code></pre></div><p>且要注意這裡的 article-header, article-body 不需在 ArticleModule exports 出來，因為它們隸屬於 article-list 內(只需 exports article-list)</p> <p>一樣把 header, body 放入該放的 template 裡，並將 tag 寫入 article-list 即可(此時因為元件化導致資料找不到報錯，後續使用@Input 來處理)</p> <p>在 article-header, article-body 的 ts 內加入 @Input 讓資料傳入子層，記得要 import Input 進來才能用</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> OnInit<span class="token punctuation">,</span> Input <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@angular/core&quot;</span><span class="token punctuation">;</span>

<span class="token decorator"><span class="token at operator">@</span><span class="token function">Component</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  selector<span class="token operator">:</span> <span class="token string">&quot;app-article-body&quot;</span><span class="token punctuation">,</span>
  templateUrl<span class="token operator">:</span> <span class="token string">&quot;./article-body.component.html&quot;</span><span class="token punctuation">,</span>
  styleUrls<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./article-body.component.scss&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ArticleBodyComponent</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Input</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> item<span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>然後在 article-list 裡使用屬性繫結綁定父層資料到子層</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span>
  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post{{idx}}<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">*ngFor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>let item of data;let idx = index<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- [父層變數]=&quot;子層變數&quot; --&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-article-header</span> <span class="token attr-name">[item]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app-article-header</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-article-body</span> <span class="token attr-name">[item]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app-article-body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="生命週期"><a href="#生命週期" class="header-anchor">#</a> 生命週期</h2> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ArticleHeaderComponent</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Input</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> item<span class="token punctuation">;</span>
  <span class="token comment">// 建構式 &gt; class 被建立時執行 &gt; 基本上不會寫程式在裡面</span>
  <span class="token comment">// 元件上未初始化，故無法使用屬性，但會使用相依注入 DI</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// 元件 property binding 已完成，可以對一些屬性給初始值或發出 ajax 跟後端拿取資料</span>
  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token comment">// 銷毀前的 hook, only 1% 使用到,rxjs subscribe() 可能會使用到</span>
  <span class="token function">ngOnDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接下來改一下 article-list.component.ts 的資料，先定義一個變數 data 在 ngOnInit() 給這個 data 一個初始值</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ArticleListComponent</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span>
  <span class="token comment">// 定義變數</span>
  data<span class="token punctuation">;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token punctuation">}</span>
  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token comment">// 給初始值</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token punctuation">[</span>
     <span class="token operator">...</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="output"><a href="#output" class="header-anchor">#</a> @Output</h2> <p>在 article-header 裡面新增一個刪除按鈕</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>header</span><span class="token punctuation">&gt;</span></span>
  ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">(click)</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>deleteList<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>刪除文章<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span>
  ...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>header</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>因為資料由父層傳送到子層，無法直接由子層刪除資料，處理的方式為按下子層的按鈕後通知父層刪除資料，所以子層按鈕只有通知的功能，並無刪除的功能，刪除需由父層來操作</p> <p>在子層定義一個 @Output 送出一個 EventEmitter 事件發射器出來，EventEmitter import 時要注意從 '@angular/core' import 進來</p> <p>在 button click 時觸發 deleteList() 的方法</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Component<span class="token punctuation">,</span> EventEmitter<span class="token punctuation">,</span> Input<span class="token punctuation">,</span> OnInit<span class="token punctuation">,</span> Output <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@angular/core&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ArticleHeaderComponent</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Input</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  item<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">;</span>
  <span class="token comment">// 子層定義一個 EventEmitter</span>
  <span class="token decorator"><span class="token at operator">@</span><span class="token function">Output</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">delete</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter<span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token function">ngOnInit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token function">deleteList</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用 EventEmitter 裡的 emit 傳 this.item 出去</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>delete<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在 article-list 裡新增事件 (delete) 當子層 click button 時會觸發 (delete) 讓父層執行 doDelete($event)，$event 為子層傳出來的值</p> <p>article-list.component.html</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>article</span>
  <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>post{{idx}}<span class="token punctuation">&quot;</span></span>
  <span class="token attr-name">*ngFor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>let item of data;let idx = index<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-article-header</span>
    <span class="token attr-name">[item]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">(delete)</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>doDelete($event)<span class="token punctuation">&quot;</span></span>
  <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app-article-header</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>app-article-body</span> <span class="token attr-name">[item]</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>app-article-body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>article</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>article-list.component.ts</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token function">doDelete</span><span class="token punctuation">(</span>item<span class="token operator">:</span><span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>此時只要點擊按鈕以後就會觸發父層 doDelete($event)，$event 回傳的是 *ngFor 跑的 item</p> <p>改寫一下 doDelete()</p> <p>在寫改寫 data.filter 時後面沒有提示訊息，將 data 定義成 Array 當 data. 就可以使用陣列的方法</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ArticleListComponent</span> <span class="token keyword">implements</span> <span class="token class-name">OnInit</span> <span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">any</span><span class="token operator">&gt;</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token function">doDelete</span><span class="token punctuation">(</span>item<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>data<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> item <span class="token operator">!==</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>接下來嘗試看看可不可以刪除資料，可以刪除代表就成功了</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/angular_project/formQuestions.html" class="prev">
        表單問題選擇實作
      </a></span> <span class="next"><a href="/blog/angular/pipe.html">
        Pipe 管線元件
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.4f9b2bd2.js" defer></script><script src="/blog/assets/js/2.25b070e4.js" defer></script><script src="/blog/assets/js/17.eb9c6b51.js" defer></script>
  </body>
</html>
